{% extends "admin/admin_base.html" %}
{% load static %}
{% block content-area %}

<div class="card">
  <header class="card-header">
    <div class="card-header-title">
      <h1 class="title">Labeled Documents</h1>
    </div>
    <div class="section section--small-padding">
      <a href="{% url 'download_labels_admin' view.kwargs.project_id %}" class="button is-primary button-margin ">Download CSV</a>
    </div>
    <a href="#" class="card-header-icon" aria-label="more options">
      <span class="icon">
        <i class="fas fa-angle-down" aria-hidden="true"></i>
      </span>
    </a>
  </header>
  <div class="card-content">
      <p>The table below diplays the [[filteredTableRows.length]] documents that were annotated. Click on column names to sort.</p>
      <table class="table is-striped is-narrow is-hoverable">
          <thead>
              <tr>
                  <th is="th-sortable" label="Document ID" v-model="sort" field="documentId"></th>
                  <th is="th-sortable" label="Number of labelers" v-model="sort" field="labelersCount"></th>
                  <th is="th-sortable" label="% Agreement" v-model="sort" field="agreementsPercent"></th>
                  <th is="th-sortable" label="Top label" v-model="sort" field="topLabel"></th>
                  <th is="th-sortable" label="Ground truth" v-model="sort" field="groundTruth"></th>
                  <th is="th-sortable" label="% Model confidence" v-model="sort" field="modelConfidence"></th>
                  <th is="th-sortable" label="Date of last annotation" v-model="sort" field="lastAnnotationDate"></th>
                  <th is="th-sortable" label="Document text" v-model="sort" field="docText"></th>
              </tr>
          </thead>
          <tbody>
              <tr v-for="(row, index) in filteredTableRows" :key="index">
                  <td><a :href="getUrl('{% url 'annotation' view.kwargs.project_id %}', row.documentId)">[[ row.documentId ]]</a></td>
                  <td>[[ row.labelersCount ]]</td>
                  <td>[[ row.agreementsPercent | toPercent ]]</td>
                  <td>[[ row.topLabel ]]</td>
                  <td>[[ row.groundTruth ]]</td>
                  <td>[[ row.modelConfidence | toPercent ]]</td>
                  <td>[[ row.lastAnnotationDate | parseDate ]]</td>
                  <td>[[ row.snippet ]]</td>
              </tr>
          </tbody>
      </table>
  </div>
</div>
{% endblock %}
{% block footer %}
<script src="{% static 'bundle/labels_admin.js' %}"></script>
{% endblock %}